Java Concurrency Stress Tests
---------------------------------------------------------------------------------
Rev: 64f2cf32fa0a, built by alex with 11-internal at 2018-06-25T17:48:53Z

Probing what VM modes are available:
 (failures are non-fatal, but may miss some interesting cases)

----- [OK] [-Xint]
----- [OK] [-XX:TieredStopAtLevel=1]
----- [OK] []
----- [OK] [-XX:+UnlockDiagnosticVMOptions, -XX:+StressLCM, -XX:+StressGCM]
----- [OK] [-XX:-TieredCompilation]
----- [OK] [-XX:-TieredCompilation, -XX:+UnlockDiagnosticVMOptions, -XX:+StressLCM, -XX:+StressGCM]

Initializing and probing the target VM:
 (all failures are non-fatal, but may affect testing accuracy)

----- [OK] Unlocking diagnostic VM options
Burning up to figure out the exact CPU count....... done!

----- [OK] Trimming down the default VM heap size to 1/4-th of max RAM
----- [OK] Trimming down the number of compiler threads
----- [OK] Trimming down the number of parallel GC threads
----- [OK] Trimming down the number of concurrent GC threads
----- [OK] Trimming down the number of G1 concurrent refinement GC threads
----- [OK] Testing @Contended works on all results and infra objects
----- [OK] Unlocking Whitebox API for online de-optimization
----- [OK] Testing allocation profiling
----- [OK] Trying Thread.onSpinWait

  Hardware threads in use/available: 4/4, using Thread.onSpinWait()
  Test preset mode: "quick"
  Writing the test results to "jcstress-results-2018-07-08-13-22-28.bin.gz"
  Parsing results to "results/"
  Running each test matching ".*" for 1 forks, 5 iterations, 200 ms each
  Each JVM would execute at most 20 tests in the row.
  Solo stride size will be autobalanced within [10, 10000] elements, but taking no more than 100 Mb.



      [OK] o.o.j.t.locks.mutex.ReentrantLockMutexTests.S_F.LI_TL
(ETA:   00:33:41) (Rate: 3.27E+06 samples/sec) (Tests: 1 of 825) (Forks:  1 of 4950) (Iterations:  1 of 29700; 1 passed, 0 failed, 0 soft errs, 0 hard errs)

      [OK] o.o.j.t.interrupt.TimeUnitSleepTest
(ETA:   00:00:50) (Rate: 2.64E+05 samples/sec) (Tests: 825 of 825) (Forks: 4949 of 4950) (Iterations: 29540 of 29700; 29540 passed, 0 failed, 0 soft errs, 0 hard errs)

      [OK] o.o.j.t.interrupt.UnsafeBusyLoopTest
    (fork: #1, iteration #0, JVM args: [-Xmx1G])
  Observed state   Occurrences              Expectation  Interpretation
           STALE             1   ACCEPTABLE_INTERESTING  Thread had failed to respond.
      TERMINATED            22               ACCEPTABLE  The thread had sucessfully terminated.

    Messages:
        Have stale threads, forcing VM to exit for proper cleanup.

(ETA:   00:00:50) (Rate: 2.63E+05 samples/sec) (Tests: 825 of 825) (Forks: 4950 of 4950) (Iterations: 29541 of 29700; 29541 passed, 0 failed, 0 soft errs, 0 hard errs)

RUN COMPLETE.

RUN RESULTS:
------------------------------------------------------------------------------------------------------------------------

*** INTERESTING tests
  Some interesting behaviors observed. This is for the plain curiosity.

  75 matching test results.
      [OK] o.o.j.t.atomicity.buffers.ByteBufferAtomicityTests.LongTest
    (JVM args: [-Xmx1G, -XX:+UnlockDiagnosticVMOptions, -XX:+StressLCM, -XX:+StressGCM])
  Observed state   Occurrences              Expectation  Interpretation
              -1        80,473               ACCEPTABLE  Seeing the complete update.
     -4294967296           295   ACCEPTABLE_INTERESTING  All other cases are unexpected, but legal.
               0         1,129               ACCEPTABLE  Seeing the default value, this is valid under race.
      4294967295            70   ACCEPTABLE_INTERESTING  All other cases are unexpected, but legal.

      [OK] o.o.j.t.atomicity.buffers.ByteBufferAtomicityTests.LongTest
    (JVM args: [-Xmx1G, -XX:-TieredCompilation, -XX:+UnlockDiagnosticVMOptions, -XX:+StressLCM, -XX:+StressGCM])
  Observed state   Occurrences              Expectation  Interpretation
              -1       395,832               ACCEPTABLE  Seeing the complete update.
     -4294967296           500   ACCEPTABLE_INTERESTING  All other cases are unexpected, but legal.
               0         1,800               ACCEPTABLE  Seeing the default value, this is valid under race.
      4294967295             9   ACCEPTABLE_INTERESTING  All other cases are unexpected, but legal.

      [OK] o.o.j.t.volatiles.VolatileIncrementAtomicityTest
    (JVM args: [-Xmx1G])
  Observed state   Occurrences              Expectation  Interpretation
            1, 1           736   ACCEPTABLE_INTERESTING  Each thread sees the same value, regardless of the update...
            1, 2       437,573               ACCEPTABLE  Each thread sees its own increment, as if the increment i...
            2, 1       337,342               ACCEPTABLE  Each thread sees its own increment, as if the increment i...


*** FAILED tests
  Strong asserts were violated. Correct implementations should have no assert failures here.

  0 matching test results.

*** ERROR tests
  Tests break for some reason, other than failing the assert. Correct implementations should have none.

  0 matching test results.

*** All remaining tests
  Tests that do not fall into any of the previous categories.

  4875 matching test results.  Use -v to print them.

------------------------------------------------------------------------------------------------------------------------

HTML report was generated. Look at results/index.html for the complete run results.

Will throw any pending exceptions at this point.
Done.
